$lastStep = null;
class %1$s extends %2$s
{
    public function %3$s(){
        %5$s
        global $lastStep;
        $steps = %4$s;
        foreach($steps as $index => $step){
            echo "\nTEST %6$s: STEP $index";
            $lastStep = $index;
            eval($step);
        }
        return eval($step);
    }
}

echo (%1$s::mk()->%3$s())
    ?"\nTEST %6$s: RESULT OK"
    :"\nTEST %6$s: RESULT FAILED";
